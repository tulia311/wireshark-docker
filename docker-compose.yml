version: '3.8'
services:
  wireshark:
    container_name: wireshark
    build: .
    environment:
      - DISPLAY=${DISPLAY}  # Hérite la variable DISPLAY de l'hôte
      - QT_QPA_PLATFORM=wayland  # Utilise le backend Wayland pour Qt
      - XAUTHORITY=/home/wireshark_user/.Xauthority  # Chemin vers le fichier d'autorisation X11
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix  # Partage le socket X11
      - /run/user/1000/.mutter-Xwaylandauth.4CME32:/home/wireshark_user/.Xauthority:ro \  # Autorisations X11
    network_mode: host  # Accès direct aux interfaces réseau
    cap_add:
      - NET_ADMIN 
      - NET_RAW
    privileged: true  # Optionnel (si nécessaire pour l'accès réseau)
    devices:
      - /dev/net/tun:/dev/net/tun  # Optionnel (si nécessaire pour l'accès réseau)